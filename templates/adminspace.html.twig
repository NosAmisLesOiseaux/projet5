{# templates/adminspace.html.twig #}

{% extends "layout.html.twig" %}

{% block title %} Espace d'administration {% endblock %}
{% block stylesheets %} {% endblock %}
{% block body %} 
	<h1>Espace administration</h1>
	<p>Compte {{ userRole }}</p>

	<section>
		<h2>{{numberOfPublishedCaptures}} {% if numberOfPublishedCaptures == 1 %} observation publiée : {% elseif numberOfPublishedCaptures > 1 %} observations publiées : {% endif %}</h2>
		<div>
			<ul>Observation
				{% for publishedcapture in publishedcaptures %}
					<a href="{{ path('observation', {id: publishedcapture.id}) }}"><li>Observation {{ publishedcapture.id }}</li></a>
				{% endfor %}
			</ul>
			<ul>Date
				{% for publishedcapture in publishedcaptures %}
					<li>{{ publishedcapture.createdDate|date('d/m/Y') }}</li>
				{% endfor %}
			</ul>
			<ul>Auteur
				{% for publishedcapture in publishedcaptures %}
					<li>{{ publishedcapture.user.firstname }} {{ publishedcapture.user.lastname }}</li>
				{% endfor %}
			</ul>
		</div>
	</section>

	<section>
		<h2> {{numberOfWaitingforvalidationCaptures}} {% if numberOfWaitingforvalidationCaptures == 1 %} observation en attente : {% elseif numberOfWaitingforvalidationCaptures > 1 %}observations en attentes {% endif %}</h2>
		<div>
			<ul>Observation
				{% for waitingforvalidationcapture in waitingforvalidationcaptures %}
					<a href="{{ path('validerObservation', {id:  waitingforvalidationcapture.id}) }}"><li>Observation {{ waitingforvalidationcapture.id }}</li></a>
				{% endfor %}
			</ul>
			<ul>Date
				{% for waitingforvalidationcapture in waitingforvalidationcaptures %}
					<li>{{ waitingforvalidationcapture.createdDate|date('d/m/Y') }}</li>
				{% endfor %}
			</ul>
			<ul>Auteur
				{% for waitingforvalidationcapture in waitingforvalidationcaptures %}
					<li>{{ waitingforvalidationcapture.user.firstname }} {{ waitingforvalidationcapture.user.lastname }}</li>
				{% endfor %}
			</ul>
		</div>
	</section>

	{% if 'administrator' in user.roles %}
		<section>
			<h2> {{numberOfPublishedComments}} {% if numberOfPublishedComments == 1 %} commentaire publié : {% elseif numberOfPublishedComments > 1 %}commentaires publiés :{% endif %}</h2>
			{% for publishedcomment in publishedcomments %}
				<p>{{ publishedcomment.content }}</p>
				<a href="{{ path('observation', {id: publishedcomment.capture.id}) }}"><p>Observation {{ publishedcomment.capture.id }}</p></a>
				<p>{{ publishedcomment.createdDate|date('d/m/Y') }}</p>
				<p>{{ publishedcomment.author.firstname }} {{ publishedcomment.author.lastname }}</p>
			{% endfor %}
		</section>

		<section>
			<h2> {{numberOfReportedComments}} {% if numberOfReportedComments == 1 %} commentaire signalé : {% elseif numberOfReportedComments > 1 %}commentaires signalés :{% endif %}</h2>
			{% for reportedcomment in reportedcomments %}
				<p>{{ reportedcomment.content }}</p>
				<a href='{{ path('observation', {id: reportedcomment.capture.id}) }}'><p>Observation {{ reportedcomment.capture.id }}</p></a>
				<p>{{ reportedcomment.createdDate|date('d/m/Y') }}</p>
				<p>{{ reportedcomment.author.firstname }} {{ reportedcomment.author.lastname }}</p>
			{% endfor %}
		</section>
	{% endif %}
{% endblock %}
{% block javascripts %} {% endblock %}